% A ConTeXt document [master document: pairs.tex]

\section[title=JoyLoL words]

\starttyping
\startCCode
static void isPairAP(Context* aCtx) {
  assert(aCtx);
  assert(aCtx->coAlgebras);
  popCtxDataInto(aCtx, top);
  CoAlgHandle* result = NULL;
  if (isPair(top)) result = newBoolean(aCtx->coAlgebras, TRUE);
  else             result = newBoolean(aCtx->coAlgebras, FALSE);
  pushCtxData(aCtx, result);
}

static void isAtomAP(Context* aCtx) {
  assert(aCtx);
  assert(aCtx->coAlgebras);
  popCtxDataInto(aCtx, top);
  CoAlgHandle* result = NULL;
  if (isAtom(top)) result = newBoolean(aCtx->coAlgebras, TRUE);
  else             result = newBoolean(aCtx->coAlgebras, FALSE);
  pushCtxData(aCtx, result);
}

static void popAP(Context* aCtx) {
  popCtxData(aCtx);
}

static void popProcessAP(Context* aCtx) {
  popCtxProcess(aCtx);
}

static void pop2ndAP(Context* aCtx) {
  popCtxDataInto(aCtx, top);
  popCtxData(aCtx);
  pushCtxData(aCtx, top);
}

static void pop2ndProcessAP(Context* aCtx) {
  popCtxProcessInto(aCtx, top);
  popCtxProcess(aCtx);
  pushCtxProcess(aCtx, top);
}
\stopCCode
\stoptyping

\startTestSuite[initPairsCoAlgebra]

\setCHeaderStream{private}
\startCHeader
extern void registerPairWords(JoyLoLInterp* jInterp);
\stopCHeader
\setCHeaderStream{public}

\startCCode
void registerPairWords(JoyLoLInterp* jInterp) {
  //extendJoyLoL(jInterp, "isPair",        isPairAP);
  //extendJoyLoL(jInterp, "isAtom",        isAtomAP);
  //extendJoyLoL(jInterp, "pop",           popAP);
  //extendJoyLoL(jInterp, "popProcess",    popProcessAP);
  //extendJoyLoL(jInterp, "pop2nd",        pop2ndAP);
  //extendJoyLoL(jInterp, "pop2ndProcess", pop2ndProcessAP);
}
\stopCCode

\stopTestSuite
