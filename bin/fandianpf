#!/usr/bin/env ruby

# This ruby script automates the running of the FandianPF server.

require 'optparse';

# Initialize the required (default) options
#
$cmdLineOptions = Hash.new();

# Now scan the command line for options
#
OptionParser.new do | opts |

  opts.banner = "Usage: fandianpf [options]";

  opts.on("-s", "--settings PATH", "PATH to YAML server settings file") do | opt |
    $cmdLineOptions[:settings] = opt;
  end

  opts.on("-a", "--server SERVER", "Rack Handler (default autodetect)") do | opt |
    $cmdLineOptions[:server] = opt;
  end

  opts.on("-h", "--host HOST", "Bind to HOST address") do | opt |
    $cmdLineOptions[:host] = opt;
  end

  opts.on("-p", "--port PORT", "Use PORT") do | opt |
    $cmdLineOptions[:port] = opt.to_i;
  end

  opts.on("-d", "--[no]-daemonize", "Run as a daemonized process in the background") do | opt |
    $cmdLineOptions[:daemonize] = opt;
  end

  opts.on("-i", "--pid PID_FILE", "File in which to store the process PID") do | opt |
    $cmdLineOptions[:pid] = opt;
  end

  opts.on("-D", "--[no]-debug", "Set debugging flags") do | opt |
    $cmdLineOptions[:debug] = opt;
  end

end.parse!(ARGV);

require File.expand_path("../../config/boot.rb", __FILE__);

pp $padrinoOptions;

Padrino.run!($padrinoOptions);
