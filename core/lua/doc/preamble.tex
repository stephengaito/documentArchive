% A ConTeXt document [master document: joylol.tex]

\startchapter[title=Preamble]

\prependLuaCode{default}
\startLuaCode
-- JoyLoL command line interpreter 

-- Start by adding the standard JoyLoL CoAlg locations to the Lua search 
-- paths 

local joylolPaths = {
  os.getenv('HOME')..'/.joylol/?.lua',
  '/usr/local/lib/joylol/?.lua',
  '/usr/lib/?.lua',
  package.path
}
package.path = table.concat(joylolPaths, ';')
print(package.path)

local joylolCPaths = {
  os.getenv('HOME')..'/.joylol/?.so',
  '/usr/local/lib/joylol/?.so',
  '/usr/lib/?.so',
  package.path
}
package.cpath = table.concat(joylolCPaths, ';')
print(package.cpath)

require 'silly'
\stopLuaCode

\createLuaCodeFile%
  {default}%
  {../build/joylol}%
  {!/usr/bin/env texlua}
  
\stopchapter