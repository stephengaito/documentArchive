-- A Lua Make System file

lfs = require 'lfs'

lfs.mkdir('build/joylol')
lfs.mkdir('build/joylol/core')
lfs.mkdir('build/core')
lfs.mkdir('/home/stg/.joylol/joylol/core')
lfs.mkdir('/home/stg/.joylol/include/joylol/core')

require 'lms.litProgs'

lpTargets = litProgs.targets{
  mainDoc  = 'coreContext.tex',
  docFiles = {
    'overview.tex',
    'luaInterface.tex',
    'luaMain.tex',
    'minJoyLoL.tex',
    'preamble.tex',
    'conclusion.tex',
  },
  docDir    = 't-joylol/doc/context/third/joyLoL',
}

require 'lms.contextMod'

contextMod.targets(lpTargets, {
  moduleFiles = {
    't-joylol.mkiv',
    't-joylol-minimal.lua',
    't-joylol.lua',
  },
  moduleDir = 't-joylol/tex/context/third/joyLoL',
})

require 'lms.joyLoL'

joylol.targets(lpTargets, {
  coAlgs = {
    'core/context',
  },
  cHeaderFiles = {
    'joylol/core/context.h',
    'joylol/core/context-private.h',
  },
  cCodeFiles = {
    'lua.c',
  },
  coAlgLibs = {
  },
})