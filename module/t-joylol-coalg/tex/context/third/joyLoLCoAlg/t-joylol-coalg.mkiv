% A ConTeXt MkIV module

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/preamble.tex after line: 0

%D \module
%D   [     file=t-joylol-coalg,
%D      version=2017.05.10,
%D        title=\CONTEXT\ User module,
%D     subtitle=The JoyLoL CoAlgebraic Extensions \ConTeXt\ module,
%D       author=Stephen Gaito,
%D         date=\currentdate,
%D    copyright=PerceptiSys Ltd (Stephen Gaito),
%D        email=stephen@perceptisys.co.uk,
%D      license=MIT License]

%C Copyright (C) 2017 PerceptiSys Ltd (Stephen Gaito)
%C
%C Permission is hereby granted, free of charge, to any person obtaining a
%C copy of this software and associated documentation files (the
%C "Software"), to deal in the Software without restriction, including
%C without limitation the rights to use, copy, modify, merge, publish,
%C distribute, sublicense, and/or sell copies of the Software, and to
%C permit persons to whom the Software is furnished to do so, subject to
%C the following conditions:
%C
%C The above copyright notice and this permission notice shall be included
%C in all copies or substantial portions of the Software.
%C
%C THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
%C OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
%C MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
%C IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
%C CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
%C TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
%C SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

% begin info
%
% title   : JoyLoL CoAlgebra definitions
% comment : Provides structured document and code generation
% status  : under development, mkiv only
%
% end info

\unprotect

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 0

\writestatus{loading}{ConTeXt User Module / JoyLoL CoAlgebra Extensions}

\usemodule[t-literate-progs]
\usemodule[t-high-lisp]
\usemodule[t-contests]
\usemodule[t-joylol]

\ctxloadluafile{t-joylol-coalg}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 50

\def\declareJoyLoLCoAlg[#1]{
  \directlua{thirddata.joylolCoAlgs.newCoAlg('#1')}
}

\let\startJoyLoLCoAlg=\declareJoyLoLCoAlg

\def\stopJoyLoLCoAlg{\relax}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 100

\def\stopJoyLoLCoAlg{
  \directlua{thirddata.joylolCoAlgs.createCoAlg()}
  \stopchapter
  \stopcomponent
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 100

\unexpanded\def\srcCopyrightCCBYSA{}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 150

\unexpanded\def\targetCopyrightMIT{}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 150

\def\dependsOn[#1]{
  \directlua{thirddata.joylolCoAlgs.addDependency('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 200

\def\startJoyLoLStackActionIn[#1]{
  \directlua{thirddata.joylolCoAlgs.newStackActionIn('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 200

\def\stopJoyLoLStackActionIn{
  \directlua{thirddata.joyloCoAlgs.endStackActionIn()}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 250

\def\startJoyLoLStackActionOut[#1]{
  \directlua{thirddata.joylolCoAlgs.newStackActionOut('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 250

\def\stopJoyLoLStackActionOut{
  \directlua{thirddata.joylolCoAlgs.endStackActionOut()}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 250

\def\preDataStack[#1][#2]{
  \directlua{thirddata.joylolCoAlgs.addPreDataStackDescription('#1', '#2')}
}

\def\postDataStack[#1]{
  \directlua{thirddata.joylolCoAlgs.addPostDataStackDescription('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/codeManipulation.tex after line: 300

\def\preProcessStack[#1][#2]{
  \directlua{thirddata.joylolCoAlgs.addPreProcessStackDescription('#1', '#2')}
}

\def\postProcessStack[#1]{
  \directlua{thirddata.joylolCoAlgs.addPostProcessStackDescription('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylol.tex after line: 0

\defineLitProgs
  [JoylolCode]
  [ option=lisp, numbering=line,
    before={\noindent\startLitProgFrame}, after=\stopLitProgFrame
  ]
 
\setLitProgsOriginMarker[JoylolCode][markJoylolCodeOrigin]

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylol.tex after line: 50

\def\addJoyLoLTargets#1{%
  \directlua{
    thirddata.joylolCoAlgs.addJoyLoLTargets('#1')
  }
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylol.tex after line: 100

\def\addCTestJoyLoLCallbacks#1{%
  \directlua{
    thirddata.joylolCoAlgs.addCTestJoyLoLCallbacks('#1')
  }
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylol.tex after line: 150

\def\setJoylolVerboseOn{%
  \directlua{thirddata.joylol.setVerbose(true)}
}

\def\setJoylolVerboseOff{%
  \directlua{thirddata.joylol.setVerbose(false)}
}

\def\setJoylolDebuggingOn{%
  \directlua{thirddata.joylol.setDebugging(true)}
}

\def\setJoylolDebuggingOff{%
  \directlua{thirddata.joylol.setVDebugging(false)}
}

\def\setJoylolTracingOn{%
  \directlua{thirddata.joylol.setTracing(true)}
}

\def\setJoylolTracingOff{%
  \directlua{thirddata.joylol.setTracing(false)}
}

\def\setJoylolShowStackOn{%
  \directlua{thirddata.joylol.setShowStack(true)}
}

\def\setJoylolShowStackOff{%
  \directlua{thirddata.joylol.setShowStack(false)}
}

\def\setJoylolShowSpecificationsOn{%
  \directlua{thirddata.joylol.setShowSpecifications(true)}
}

\def\setJoylolShowSpecificationsOff{%
  \directlua{thirddata.joylol.setShowSpecifications(false)}
}

\def\setJoylolCheckingOn{%
  \directlua{thirddata.joylol.setChecking(true)}
}

\def\setJoylolCheckingOff{%
  \directlua{thirddata.joylol.setChecking(false)}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylolTests.tex after line: 0

\definetyping[JoylolTest]
\setuptyping[JoylolTest][option=lisp]

\let\oldStopJoylolTest=\stopJoylolTest
\def\stopJoylolTest{%
  \oldStopJoylolTest%
  \directlua{thirddata.contests.addJoylolTest('_typing_')}
}

\def\showJoylolTest{%
  \directlua{thirddata.contests.showJoylolTest()}
}

\def\setJoylolTestStage#1#2{%
  \directlua{%
    thirddata.contests.setJoylolTestStage('#1', '#2')
  }
}

\def\JoylolTestsMethodSetup{%
  \setJoylolTestStage{Methods}{Setup}
}

\def\JoylolTestsMethodTeardown{%
  \setJoylolTestStage{Methods}{Teardown}
}

\def\JoylolTestsSetup{%
  \setJoylolTestStage{Global}{Setup}
}

\def\JoylolTestsTeardown{%
  \setJoylolTestStage{Global}{Teardown}
}

\def\JoylolTestSuiteSetup{%
  \setJoylolTestStage{TestSuite}{Setup}
}

\def\JoylolTestSuiteTeardown{%
  \setJoylolTestStage{TestSuite}{Teardown}
}

\def\setJoylolTestStream#1{%
  \directlua{
    thirddata.contests.setJoylolTestStream('#1')
  }
}

\def\addJoylolTestInclude#1{%
  \directlua{
    thirddata.contests.addJoylolTestInclude('#1')
  }
}

\def\addJoylolTestLibDir#1{%
  \directlua{
    thirddata.contests.addJoylolTestLibDir('#1')
  }
}

\def\addJoylolTestLib#1{%
  \directlua{
    thirddata.contests.addJoylolTestLib('#1')
  }
}

\def\createJoylolTestFile#1#2#3{%
  \directlua{
    thirddata.contests.createJoylolTestFile('#1', '#2', '#3')
  }
}

\def\addJoylolTestTargets#1{%
  \directlua{
    thirddata.contests.addJoylolTestTargets('#1')
  }
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylolTests.tex after line: 250

\def\createJoylolTestFile#1#2#3{%
  \directlua{
    thirddata.contests.createJoylolTestFile('#1', '#2', '#3')
  }
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/joylolTests.tex after line: 500

\def\addJoyLoLTestTargets#1{%
  \directlua{
    thirddata.joylolCoAlgs.addJoylolTestTargets('#1')
  }
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/rules.tex after line: 0

\let\stopRule\relax

\def\stopRuleDone{
  \directlua{thirddata.joylolCoAlgs.stopRule()}
}

\def\startRule[#1]{
  \directlua{thirddata.joylolCoAlgs.startRule('#1')}
  \buff_pickup{_rules_buffer_}%
    {startRule}{stopRule}%
    {\relax}{\stopRuleDone}\plusone%
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/fragments.tex after line: 0

\def\startJoyLoLFragment[#1]{
  \directlua{thirddata.joylolCoAlgs.newFragment('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/fragments.tex after line: 0

\def\stopJoyLoLFragment{
  \directlua{thirddata.joylolCoAlgs.endFragment()}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/fragments.tex after line: 50

\let\stopFragment\relax

\def\stopFragmentDone{
  \directlua{thirddata.joylolCoAlgs.stopFragment()}
}

\def\startFragment[#1]{
  \directlua{thirddata.joylolCoAlgs.startFragment('#1')}
  \buff_pickup{_fragment_buffer_}%
    {startFragment}{stopFragment}%
    {\relax}{\stopFragmentDone}\plusone%
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/words.tex after line: 0

\def\startJoyLoLWord[#1]{
  \directlua{thirddata.joylolCoAlgs.newWord('#1')}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/words.tex after line: 0

\def\stopJoyLoLWord{
  \directlua{thirddata.joylolCoAlgs.endWord()}
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/words.tex after line: 50

\let\stopImplementation\relax

\def\stopImplementationDone{
  \directlua{thirddata.joylolCoAlgs.stopImplementation()}
}

\def\startImplementation[#1]{
  \directlua{thirddata.joylolCoAlgs.startImplementation('#1')}
  \buff_pickup{_implementation_buffer_}%
    {startImplementation}{stopImplementation}%
    {\relax}{\stopImplementationDone}\plusone%
}

% from file: /home/stg/ExpositionGit/tools/conTeXt/joylol/module/t-joylol-coalg/doc/context/third/joyLoLCoAlg/preamble.tex after line: 50

\protect \endinput