% A ConTeXt document [master document: joylolTests.tex]

\section[title=Words]

\startTestSuite[start/stop joylol all tests]

\setJoylolTracingOff\setJoylolVerboseOff

We start by defining a naming scope to contain all of the Joylol test 
associated words. This naming space is denoted \quote{tests} in the 
\quote{globals} naming scope. The \quote{tests} naming scope's parent 
naming scope is \quote{globals}. 

\startJoylolCode
;; create a tests naming scope
globals      ;; parent naming scope
globals      ;; defining naming scope
tests        ;; defined name of this new naming scope
defineNaming ;; make the definition
\stopJoylolCode

Now we create a context in the tests naming scope, which will keep track 
of the test results. 

\startJoylolCode
( interpret ) ;; testStats process
( 
  0           ;; number of attempted tests
  0           ;; number of failed tests
  ()          ;; list of failure reports
)             ;; testStats data
tests         ;; the new context's naming scope
tests         ;; defining naming scope
testStats     ;; defined name of this new context
defineContext ;; create and define the context
\stopJoylolCode

\stopTestSuite

\starttyping
\startTestSuite[start/stop joylol test suite]

\startJoylolCode
  (
  )
  startTestSuite
  define
  
  (
  )
  stopTestSuite
  define
\stopJoylolCode

\stopTestSuite
\stoptyping

\startTestSuite[run/skip joylol test case]

\startJoylolCode
(
  ( interpret ) ;; process
  (
    true ;; test case successful
    false ;; test case should fail
  ) ;; data
  tests
  curTestCase
  defineContext
)
tests
runTestCase
define
\stopJoylolCode

\stopTestSuite

\startTestSuite[reportTestResult]

\startJoylolCode
  (
  )
  reportTestResult
  define
\stopJoylolCode

\stopTestSuite

\startTestSuite[assertShouldFail]

\startTestCase[assert should fail]
\startJoylolTest
"this is a test"
doSomeThing
\stopJoylolTest
\stopTestCase
\stopTestSuite

\startTestSuite[assertFail]

\stopTestSuite

\startTestSuite[assertSucceed]

\stopTestSuite

\startTestSuite[assertTrue]

\stopTestSuite

\startTestSuite[assertFalse]

\stopTestSuite

\startTestSuite[assertNil]

\stopTestSuite

\startTestSuite[assertNotNil]

\stopTestSuite

\startTestSuite[assertAtom]

\stopTestSuite

\startTestSuite[assertPair]

\stopTestSuite

\startTestSuite[assertNatural]

\stopTestSuite

\startTestSuite[assertSymbol]

\stopTestSuite

\startTestSuite[assertContext]

\stopTestSuite

\startTestSuite[assertDictionary]

\stopTestSuite

\startTestSuite[assertDictNode]

\stopTestSuite


\setCHeaderStream{private}
\startCHeader
extern void registerJoylolTestWords(
  JoyLoLInterp* jInterp
);
\stopCHeader
\setCHeaderStream{public}

\startCCode
void registerJoylolTestWords(
  JoyLoLInterp* jInterp
) {
  assert(jInterp);

}
\stopCCode